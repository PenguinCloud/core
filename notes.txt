Ansible:
ansible-galaxy collection install community.kubernete

APT: Update and upgrade
APT: install net-tools, docker.io, vim, nano, unzip
Follow: https://rancher.com/docs/rancher/v2.x/en/installation/resources/k8s-tutorials/ha-with-external-db/
Script: curl -sfL https://get.k3s.io | sh -s - server \
--datastore-endpoint="mysql://pmgk3s:0XC2b6Nqdfyo887xJ860qVb@tcp(66.42.116.45:3306)/pmgk3s"
^ Maybe we should reverse engineer it at some point
dbpass: 0XC2b6Nqdfyo887xJ860qVb

CREATE USER 'pmgk3s'@'%' IDENTIFIED BY '0XC2b6Nqdfyo887xJ860qVb';

APT: install apt-transport-https ca-certificates curl
APT-kEY: curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg
APT-SOURCE: echo "deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
APT: Update and then Install kubectl
MKDIR: /root/.kube
CP: /etc/rancher/k3s/k3s.yaml /root/.kube/config/k3s.yaml
REPLACELINE: /root/.kube/config/k3s.yaml 127.0.0.1 -> cluster.penguinzmedia.group
ADDLINE: under user: addd username: pmg-amdin, password: <pmg int pass>
KUBECONF: Apply config
SCRIPTINSTALL:  https://helm.sh/docs/intro/install/
^ Can also be done with APT:
    curl https://baltocdn.com/helm/signing.asc | sudo apt-key add -
    sudo apt-get install apt-transport-https --yes
    echo "deb https://baltocdn.com/helm/stable/debian/ all main" | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
    sudo apt-get update
    sudo apt-get install helm
HELM: Add repo rancher-stable https://releases.rancher.com/server-charts/stable
KUBE: Create namespace cattle-system
KUBE: Install cert-manager kubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.crds.yaml
KUBE: create cert-manager namespace kubectl create namespace cert-manager
HELM: Add repo for jetsatackl helm repo add jetstack https://charts.jetstack.io
HELM: update helm repo update
HELM: Deploy cert-manager helm install cert-manager jetstack/cert-manager \
  --namespace cert-manager \
  --create-namespace \
  --version v1.4.0 \
  --set installCRDs=true
WAIT: 2 minutes
CERTS: helm install rancher rancher-stable/rancher \
  --namespace cattle-system \
  --set hostname=cluster.penguinzmedia.group \
  --set ingress.tls.source=letsEncrypt \
  --set letsEncrypt.email=justin@penguinzmedia.group